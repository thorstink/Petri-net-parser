<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="720px" height="640px" viewBox="-0.5 -0.5 720 640"><defs><style type="text/css">@import url(https://fonts.googleapis.com/css?family=Architects+Daughter);&#xa;</style></defs><g><path d="M 240 270 Q 240 200 313.63 200" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 318.88 200 L 311.88 203.5 L 313.63 200 L 311.88 196.5 Z" fill="#e07a5f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="240" cy="310" rx="40" ry="40" fill="none" stroke="#e07a5f" pointer-events="all"/><path d="M 380 200 Q 445 200 445 263.63" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 445 268.88 L 441.5 261.88 L 445 263.63 L 448.5 261.88 Z" fill="#e07a5f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><path d="M 320 176 C 320 154.67 380 154.67 380 176 L 380 224 C 380 245.33 320 245.33 320 224 Z" fill="#f2cc8f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><path d="M 320 176 C 320 192 380 192 380 176" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="260" width="190" height="120" rx="18" ry="18" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 182px; height: 1px; padding-top: 250px; margin-left: 5px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 130px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Callback queue</h1><p style="">The Callback queue contains all the callbacks associated with the transitions that have been fired.</p></div></div></div></foreignObject><text x="5" y="262" fill="#393C56" font-family="Helvetica" font-size="12px">Callback queue...</text></switch></g><rect x="510" y="250" width="210" height="140" rx="21" ry="21" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 202px; height: 1px; padding-top: 240px; margin-left: 515px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 150px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Reducer queue</h1><p>The reducer queue is dequeued on the Symmetri main-thread. Reducers update the Symmetri state by removing transitions from the active set and potentially updating marking based on the Callbacks' <i>success</i>. </p></div></div></div></foreignObject><text x="515" y="252" fill="#393C56" font-family="Helvetica" font-size="12px">Reducer queue...</text></switch></g><rect x="255" y="10" width="190" height="140" rx="21" ry="21" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 182px; height: 1px; padding-top: 0px; margin-left: 260px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 150px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Threadpool</h1><div>A fixed-size threadpool dequeues callbacks and executes them. The result of every callback is a Reducer that updates the internal Symmetri state. The reducer is dispatched for later execution.</div></div></div></div></foreignObject><text x="260" y="12" fill="#393C56" font-family="Helvetica" font-size="12px">Threadpool...</text></switch></g><path d="M 320 430 Q 240 430 240 356.37" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 240 351.12 L 243.5 358.12 L 240 356.37 L 236.5 358.12 Z" fill="#e07a5f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><rect x="320" y="400" width="55" height="60" rx="8.25" ry="8.25" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><rect x="240" y="470" width="250" height="170" rx="25.5" ry="25.5" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 242px; height: 1px; padding-top: 460px; margin-left: 245px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 180px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Fire transitions</h1><p>In the main Symmetri loop, unless paused or cancelled, the set of active transitions is determined and queued to the callback queue in order of priority. Transitions with Synchronous Callbacks are executed on the Symmetri main-thread and can directly mutate the post-Callback mutations. </p></div></div></div></foreignObject><text x="245" y="472" fill="#393C56" font-family="Helvetica" font-size="12px">Fire transitions...</text></switch></g><rect x="190" y="380" width="40" height="20" rx="3" ry="3" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 38px; height: 1px; padding-top: 390px; margin-left: 192px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Callback queuing</div></div></div></foreignObject><text x="192" y="394" fill="#393C56" font-family="Helvetica" font-size="12px">Callba...</text></switch></g><rect x="190" y="200" width="40" height="20" rx="3" ry="3" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 38px; height: 1px; padding-top: 210px; margin-left: 192px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Callback execution</div></div></div></foreignObject><text x="192" y="214" fill="#393C56" font-family="Helvetica" font-size="12px">Callba...</text></switch></g><rect x="460" y="200" width="40" height="20" rx="3" ry="3" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 38px; height: 1px; padding-top: 210px; margin-left: 462px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Reducer queuing</div></div></div></foreignObject><text x="462" y="214" fill="#393C56" font-family="Helvetica" font-size="12px">Reduce...</text></switch></g><ellipse cx="240" cy="310" rx="26.25" ry="26.25" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><path d="M 200 310 L 213.75 310" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 211.72 338.28 L 221.44 328.56" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 240 350 L 240 336.25" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 258.56 328.56 L 268.28 338.28" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 266.25 310 L 280 310" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 268.28 281.72 L 258.56 291.44" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 240 270 L 240 283.75" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 211.72 281.72 L 221.44 291.44" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="445" cy="310" rx="40" ry="40" fill="none" stroke="#e07a5f" pointer-events="all"/><ellipse cx="445" cy="310" rx="26.25" ry="26.25" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><path d="M 405 310 L 418.75 310" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 416.72 338.28 L 426.44 328.56" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 445 350 L 445 336.25" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 463.56 328.56 L 473.28 338.28" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 471.25 310 L 485 310" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 473.28 281.72 L 463.56 291.44" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 445 270 L 445 283.75" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 416.72 281.72 L 426.44 291.44" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="445" cy="430" rx="20" ry="20" fill="none" stroke="#e07a5f" pointer-events="all"/><ellipse cx="445" cy="421" rx="5" ry="5" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><ellipse cx="455" cy="431" rx="5" ry="5" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><ellipse cx="445" cy="441" rx="5" ry="5" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><ellipse cx="435" cy="431" rx="5" ry="5" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><path d="M 445 350 L 445 403.63" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 445 408.88 L 441.5 401.88 L 445 403.63 L 448.5 401.88 Z" fill="#e07a5f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><rect x="460" y="436" width="60" height="30" rx="4.5" ry="4.5" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 451px; margin-left: 461px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Marking</div></div></div></foreignObject><text x="490" y="455" fill="#393C56" font-family="Helvetica" font-size="12px" text-anchor="middle">Marking</text></switch></g><path d="M 425 430 L 381.37 430" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 376.12 430 L 383.12 426.5 L 381.37 430 L 383.12 433.5 Z" fill="#e07a5f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><path d="M 347.5 400 Q 370 370 395 375 Q 420 380 433.29 406.38" fill="none" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 435.65 411.07 L 429.37 406.39 L 433.29 406.38 L 435.63 403.24 Z" fill="#e07a5f" stroke="#e07a5f" stroke-miterlimit="10" pointer-events="all"/><rect x="460" y="380" width="40" height="20" rx="3" ry="3" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 38px; height: 1px; padding-top: 390px; margin-left: 462px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Reducer execution</div></div></div></foreignObject><text x="462" y="394" fill="#393C56" font-family="Helvetica" font-size="12px">Reduce...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>
